@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Apple-like Zinc/Slate Palette */
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;

    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;

    /* Apple Blue */
    --primary: 212 100% 48%;
    /* #007AFF */
    --primary-foreground: 0 0% 98%;

    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;

    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;

    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 212 100% 48%;

    --radius: 0.75rem;

    /* Legacy Variables (Mapped to new system where possible, or kept for compatibility) */
    --color-primary: #007AFF;
    --color-primary-hover: #0062CC;
    --color-primary-active: #004999;
    --color-primary-light: #E5F1FF;
    --color-primary-teal: #00C7BE;

    --color-secondary-beige: #F5F5F7;
    --color-secondary-orange: #FF9500;
    --color-secondary-blue: #5AC8FA;

    --color-text-primary: #1D1D1F;
    --color-text-secondary: #86868B;
    --color-text-tertiary: #BFBFBF;
    --color-text-disabled: #D2D2D7;
    --color-text-inverse: #FFFFFF;

    --color-background-primary: #FFFFFF;
    --color-background-secondary: #F5F5F7;
    --color-background-tertiary: #E8E8ED;
    --color-background-elevated: #FFFFFF;

    --color-border: #D2D2D7;
    --color-border-light: #E5E5EA;

    --color-success: #34C759;
    --color-success-light: #E6F9EA;
    --color-success-dark: #248A3D;

    --color-warning: #FF9F0A;
    --color-warning-light: #FFF5E5;
    --color-warning-dark: #B26F07;

    --color-error: #FF3B30;
    --color-error-light: #FFECEB;
    --color-error-dark: #B22922;

    --color-info: #007AFF;
    --color-info-light: #E5F1FF;
    --color-info-dark: #0055B3;

    --color-neutral-50: #F9FAFB;
    --color-neutral-100: #F3F4F6;
    --color-neutral-200: #E5E7EB;
    --color-neutral-300: #D1D5DB;
    --color-neutral-400: #9CA3AF;
    --color-neutral-500: #6B7280;
    --color-neutral-600: #4B5563;
    --color-neutral-700: #374151;
    --color-neutral-800: #1F2937;
    --color-neutral-900: #111827;
    --color-neutral-charcoal: #1D1D1F;
    --color-neutral-slate: #86868B;
    --color-neutral-white: #FFFFFF;

    --color-interactive-hover: rgba(0, 0, 0, 0.05);
    --color-interactive-pressed: rgba(0, 0, 0, 0.1);
    --color-interactive-selected: #E5F1FF;
    --color-interactive-focus: rgba(0, 122, 255, 0.5);

    --color-data-protein: #FF3B30;
    --color-data-carbs: #FF9500;
    --color-data-fat: #FFCC00;
    --color-data-fiber: #34C759;
    --color-data-deficit: #FF3B30;
  }

  /* Alias variables for legacy components mapped to theme tokens (reactive to dark/light) */
  :root {
    --text-primary: hsl(var(--foreground));
    --text-secondary: hsl(var(--muted-foreground));
    --text-tertiary: hsl(var(--muted-foreground));
    --text-inverse: hsl(var(--primary-foreground));
    --text-accent: hsl(var(--primary));
    --text-link: hsl(var(--primary));

    --bg-primary: hsl(var(--background));
    --bg-secondary: hsl(var(--secondary));
    --bg-tertiary: hsl(var(--muted));
    --bg-elevated: hsl(var(--card));
    --bg-modal: hsl(var(--card));
    --bg-dimmer: rgba(17, 24, 39, 0.5);

    --border-primary: hsl(var(--border));
    --border-secondary: hsl(var(--input));

    --success-text: var(--color-success);
    --warning-text: var(--color-warning);
    --error-text: var(--color-error);
    --info-text: var(--color-info);

    --success-bg: var(--color-success-light);
    --warning-bg: var(--color-warning-light);
    --error-bg: var(--color-error-light);
    --info-bg: var(--color-info-light);

    --button-primary-bg: hsl(var(--primary));
    --button-primary-text: hsl(var(--primary-foreground));
    --button-secondary-bg: hsl(var(--secondary));
    --button-secondary-text: hsl(var(--secondary-foreground));
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 100%;

    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 100%;

    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 100%;

    --primary: 212 100% 48%;
    --primary-foreground: 0 0% 100%;

    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 100%;

    --muted: 240 3.7% 15.9%;
    --muted-foreground: 0 0% 100%;

    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 212 100% 48%;

    /* Semantic Colors Overrides for Dark Mode */
    --color-success: #4ADE80;
    --color-success-light: rgba(74, 222, 128, 0.15);
    --color-success-dark: #86EFAC;

    --color-warning: #FACC15;
    --color-warning-light: rgba(250, 204, 21, 0.15);
    --color-warning-dark: #FDE047;

    --color-error: #F87171;
    --color-error-light: rgba(248, 113, 113, 0.15);
    --color-error-dark: #FCA5A5;

    --color-info: #60A5FA;
    --color-info-light: rgba(96, 165, 250, 0.15);
    --color-info-dark: #93C5FD;

    --color-neutral-100: #1f2937;
    --color-neutral-200: #374151;
    --color-neutral-300: #4b5563;
    --color-neutral-400: #9ca3af;
    --color-neutral-500: #d1d5db;
    --color-neutral-600: #e5e7eb;
    --color-neutral-700: #f3f4f6;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* Custom Scrollbar for WebKit */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-neutral-300);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-neutral-400);
}

/* Hide scrollbar for clean UI but allow scroll */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}